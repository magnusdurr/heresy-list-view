{{#if weapons}}
    <table class="table-sm stats-table">
        <tbody>
            <tr>
                <td>Weapon</td>
                <td>Range</td>
                <td>Firepower</td>
            </tr>
            {{#each weapons}}
                {{#with (parseWeapon this)}}
                    {{#each modes}}
                        <tr>
                            <td scope="row">
                                {{#if join}}
                                    <i>{{join}}</i>
                                {{else}}
                                    {{weaponDisplayName ../this}}
                                {{/if}}
                            </td>
                            <td>{{appendOnNumber range 'cm'}}</td>
                            <td>
                                {{#if firepower}}
                                    {{firepower}}{{#each specialRules}}, <i>{{specialRuleTooltip this}}</i>{{/each}}
                                {{else}}
                                                        {{#each specialRules}}
                        {{#if @first}}
                            <i>{{specialRuleTooltip this}}</i>
                        {{else}}, <i>{{specialRuleTooltip this}}</i>{{/if}}
                    {{/each}}
                                {{/if}}
                            </td>
                        </tr>
                    {{/each}}
                {{/with}}
            {{/each}}
        </tbody>
    </table>
{{/if}}

{{#unless weapons}}
    {{#each weaponMounts}}
        <p class="weapon-mount">{{mount}}{{#if notes}} ({{notes}}){{/if}}</p>
        {{#each types}}
            <table class="table-sm stats-table weapon-mount-type-table">
                <tbody>
                    <tr>
                        <td>{{name}}</td>
                        <td>Range</td>
                        <td>Firepower</td>
                    </tr>
                    {{#each weapons}}
                        {{#with (parseWeapon this)}}
                            {{#each modes}}
                                <tr>
                                    <td scope="row">
                                        {{#if join}}
                                            <i>{{join}}</i>
                                        {{else}}
                                            {{weaponDisplayName ../this}}
                                        {{/if}}
                                    </td>
                                    <td>{{appendOnNumber range 'cm'}}</td>
                                    <td>
                                        {{firepower}}{{#each specialRules}}, <i><small>{{specialRuleTooltip this}}</small></i>{{/each}}
                                    </td>
                                </tr>
                            {{/each}}
                        {{/with}}
                    {{/each}}
                </tbody>
            </table>
        {{/each}}
    {{/each}}
{{/unless}}